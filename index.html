<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Rock Paper Scissors Game</title>
	</head>
	<body>
		<script>
		
		function playerPlay () { // let player make a selection
			let playerSelection = "";
			let keepGoing = true;
			while (keepGoing) {
				playerSelection = prompt("Choose rock paper or scissors!");
				if (playerSelection === null || playerSelection === undefined) {
					if (confirm("Stop playing?")) break;
					
				} else {
					let firstLetter = playerSelection.charAt(0);
					playerSelection = firstLetter.toUpperCase() + playerSelection.substr(1);
					if (playerSelection === "Rock" ||
							playerSelection === "Paper" ||
							playerSelection === "Scissors") keepGoing = false;
				}
			}
			return playerSelection;
		}
		//console.log(playerPlay());

		function computerPlay () { // let computer make a selection
			let random = Math.floor((Math.random()*10) % 3);
			let computerSelection = (random === 0) ? "Rock" :
			(random === 1) ? "Paper" :
			"Scissors";
			return computerSelection;
		}
		//console.log(computerPlay());

		function playRound(playerSelection, computerSelection) {
			let result = ["", ""];
			if (playerSelection === null || playerSelection === undefined) return;
			console.log(`Player: ${playerSelection}, Computer: ${computerSelection}`)
			if (playerSelection === "Rock" && computerSelection === "Scissors" ||
					playerSelection === "Paper" && computerSelection === "Rock") {
						return result = [`${playerSelection} beats ${computerSelection.toLowerCase()}`, 1];
					} else if (playerSelection === "Scissors" && computerSelection === "Paper") {
						return result = ["Scissors beat paper", 1];
					} else if (playerSelection === computerSelection) {
						return result[0] = ["It's a tie! Try again"];
					} else if (computerSelection === "Scissors" && playerSelection === "Paper") {
						return result = ["Scissors beat paper", 2];
					} else {
						return result = [`${computerSelection} beats ${playerSelection.toLowerCase()}`, 2];
					}
		}
		
		function game() {
			let round = 1;
			let score = [0, 0];
			for (let i = 0; i < 5; i++) {
				console.log(`Round ${round}`);
				let result = playRound(playerPlay(), computerPlay());
				if (result === undefined) {
					console.log("Game cancelled");
					break;
				}
				console.log(result[0]);
				if (result[1] === 1) {
					score[0]++;
				} else if (result[1] === 2) {
					score[1]++;
				}
				if (result[0] === "It's a tie! Try again") {
					i--;
					round--;
				}
				round++;
			}
			if (score[0] > score[1]) {
				console.log(`You won!\nScore:\nYou: ${score[0]}, Computer: ${score[1]}`);
			} else {
				console.log(`You lost!\nScore:\nComputer: ${score[1]}, You: ${score[0]}`);
			}
		}

		game();

		</script>
	</body>
</html>